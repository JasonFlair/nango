"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[977],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var o=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=o.createContext({}),s=function(e){var n=o.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=s(e.components);return o.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(t),g=a,h=d["".concat(p,".").concat(g)]||d[g]||u[g]||r;return t?o.createElement(h,i(i({ref:n},c),{},{components:t})):o.createElement(h,i({ref:n},c))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<r;s++)i[s]=t[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},378:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var o=t(7462),a=(t(7294),t(3905));const r={},i="Step-by-step guide",l={unversionedId:"reference/guide",id:"reference/guide",title:"Step-by-step guide",description:"In about 15-20 minutes, let's set up an OAuth integration in your app for any external API.",source:"@site/docs/reference/guide.md",sourceDirName:"reference",slug:"/reference/guide",permalink:"/reference/guide",draft:!1,editUrl:"https://github.com/nangohq/nango/tree/main/docs/docs/reference/guide.md",tags:[],version:"current",frontMatter:{},sidebar:"nango",previous:{title:"Quickstart",permalink:"/quickstart"},next:{title:"CLI",permalink:"/reference/cli"}},p={},s=[{value:"Step 0: Start Nango",id:"step-0-start-nango",level:2},{value:"Step 2: Configure a provider",id:"step-2-configure-a-provider",level:2},{value:"Step 3: Trigger the OAuth flow (frontend)",id:"step-3-trigger-the-oauth-flow-frontend",level:2},{value:"Step 4: Retrieve tokens (backend)",id:"step-4-retrieve-tokens-backend",level:2},{value:"Node SDK",id:"node-sdk",level:3},{value:"REST API",id:"rest-api",level:3},{value:"CLI",id:"cli",level:3},{value:"Need help?",id:"need-help",level:2}],c={toc:s};function u(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"step-by-step-guide"},"Step-by-step guide"),(0,a.kt)("p",null,"In about ",(0,a.kt)("strong",{parentName:"p"},"15-20 minutes"),", let's set up an OAuth integration in your app for any external API."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"If using ",(0,a.kt)("a",{parentName:"p",href:"/cloud"},"Nango Cloud"),", replace all mentions of ",(0,a.kt)("inlineCode",{parentName:"p"},"http://localhost:3003")," by your Server URL. You should also have configured local env variables to enable the CLI (",(0,a.kt)("a",{parentName:"p",href:"/cloud"},"instructions"),").")),(0,a.kt)("h2",{id:"step-0-start-nango"},"Step 0: Start Nango"),(0,a.kt)("p",null,"\u2757\ufe0fSkip this step if you use ",(0,a.kt)("a",{parentName:"p",href:"/cloud"},"Nango Cloud"),"."),(0,a.kt)("p",null,"Clone and start Nango:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/NangoHQ/quickstart.git && cd quickstart\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose up # Keep the tab open\n")),(0,a.kt)("h2",{id:"step-2-configure-a-provider"},"Step 2: Configure a provider"),(0,a.kt)("p",null,"To access an OAuth API, you need a few things from the OAuth provider/API:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Find the ",(0,a.kt)("strong",{parentName:"p"},"template name")," for the OAuth provider from the ",(0,a.kt)("a",{parentName:"p",href:"https://nango.dev/oauth-providers"},"list of pre-configured APIs")," (usually the name of the API in lowercase, e.g. ",(0,a.kt)("inlineCode",{parentName:"p"},"github"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"asana"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"linkedin")," etc.)")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Obtain a ",(0,a.kt)("strong",{parentName:"p"},"Client ID")," and ",(0,a.kt)("strong",{parentName:"p"},"Client Secret")," from the OAuth provider. These credentials identify your application towards the OAuth API. You find them in the OAuth provider's developer portal. While obtaining them, the OAuth provider should ask you to specify a ",(0,a.kt)("strong",{parentName:"p"},"Callback URL"),", which is ",(0,a.kt)("inlineCode",{parentName:"p"},"http://localhost:3003/oauth/callback")," (if running Nango locally) or ",(0,a.kt)("inlineCode",{parentName:"p"},"SERVER_URL/oauth/callback")," (if using Nango Cloud).")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Look up the ",(0,a.kt)("strong",{parentName:"p"},"scopes")," (aka permissions) you want to request from users. Scopes are specific to individual OAuth providers, so you should look them up in the OAuth provider's API documentation.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Finally, decide on a ",(0,a.kt)("strong",{parentName:"p"},"unique key")," for you provider configuration. If you only have one configuration per API provider, we recommend you use the API's name in all lowercase, e.g. ",(0,a.kt)("inlineCode",{parentName:"p"},"github")," for GitHub, ",(0,a.kt)("inlineCode",{parentName:"p"},"salesforce")," for Salesforce etc."))),(0,a.kt)("p",null,"With this information you are now ready to configure & enable your first OAuth provider:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'npx nango config:create <unique-config-key-from-4> <template-name-from-1> <cliend-id-from-2> <client-secret-from-2> <scopes-from-2>\n# e.g. for github: npx nango config:create github github <some-id> <some-secret> "comma,separated,scopes,with,quotes"\n')),(0,a.kt)("p",null,"Now run ",(0,a.kt)("inlineCode",{parentName:"p"},"npx nango config:list")," and you should see your freshly added config \ud83c\udf89"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Run ",(0,a.kt)("inlineCode",{parentName:"p"},"npx nango")," to display all available CLI commands + help.")),(0,a.kt)("h2",{id:"step-3-trigger-the-oauth-flow-frontend"},"Step 3: Trigger the OAuth flow (frontend)"),(0,a.kt)("p",null,"For quick testing you can call Nango directly from within a ",(0,a.kt)("inlineCode",{parentName:"p"},"<script>")," tag on your page:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},"<script type=\"module\">\n    import Nango from 'https://unpkg.com/@nangohq/frontend/dist/index.js';\n\n    var nango = new Nango('http://localhost:3003'); // Local\n    // or\n    var nango = new Nango('Server URL'); // Nango Cloud\n\n    //... see below\n<\/script>\n")),(0,a.kt)("p",null,"For single page apps, install the ",(0,a.kt)("inlineCode",{parentName:"p"},"@nangohq/frontend")," package:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import Nango from '@nangohq/frontend';\n")),(0,a.kt)("p",null,"Trigger a user OAuth flow:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"var nango = new Nango('http://localhost:3003'); // Local\n// or\nvar nango = new Nango('Server URL'); // Nango Cloud\n\n// Trigger an OAuth flow\n// Param 1: unique config key from Step 2 (bullet 4)\n// Param 2: ID you will use to retrieve the connection (most often the user ID)\nnango\n    .auth('github', '<connection-id>')\n    .then((result) => {\n        console.log(`OAuth flow succeeded for provider \"${result.providerConfigKey}\" and connection-id \"${result.connectionId}\"!`);\n    })\n    .catch((error) => {\n        console.error(`There was an error in the OAuth flow for integration: ${error.message}`);\n    });\n")),(0,a.kt)("p",null,"With the frontend part ready, you should now be able to run a full OAuth flow from your app while Nango will retrieve, store and refresh tokens automatically. Go ahead & try it! \ud83d\ude4c"),(0,a.kt)("h2",{id:"step-4-retrieve-tokens-backend"},"Step 4: Retrieve tokens (backend)"),(0,a.kt)("p",null,"The last step is to retrieve fresh access tokens whenever you need to make authenticated API requests on behalf of users."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Many OAuth providers provide short-lived access tokens (30-60 minutes). Nango refreshes them automatically for you, but it is important you always request the access token right before each API call. Otherwise you may work with a stale token that has been revoked and your API call will fail.")),(0,a.kt)("p",null,"Nango offers a couple ways to retrieve fresh access tokens:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Backend SDKs"),": easiest way if an SDK is available for your language (currently only Node, others coming soon)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"REST API"),": equivalent fallback option if no SDK is available for your language"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"CLI"),": convenient for testing & development")),(0,a.kt)("p",null,"In all cases, you need to tell Nango two things to get the access token:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Provider Config Key"),", which identifies the OAuth provider configuration (from Step 2, bullet 4)"),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Connection ID"),", which identifies the connection containing the access token (from Step 3)")),(0,a.kt)("h3",{id:"node-sdk"},"Node SDK"),(0,a.kt)("p",null,"Install the SDK with"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm i -S @nangohq/node\n")),(0,a.kt)("p",null,"Retrieve access tokens:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import { Nango } from '@nangohq/node';\n\nlet nango = new Nango('http://localhost:3003'); // Local\n// or\nlet nango = new Nango('Server Url', 'Secret Key'); // Nango Cloud\n\nlet accessToken = await nango.getToken('<config-key>', '<connection-id>'); // Token\n//or\nlet connection = await nango.getConnection('<config-key>', '<connection-id>'); // Token + Connection info\n")),(0,a.kt)("p",null,"\u2757\ufe0fIf using ",(0,a.kt)("a",{parentName:"p",href:"/cloud"},"Nango Cloud"),", you should use env variables for your ",(0,a.kt)("inlineCode",{parentName:"p"},"Server Url")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Secret Key"),"."),(0,a.kt)("h3",{id:"rest-api"},"REST API"),(0,a.kt)("p",null,"Your can test the Nango API endpoint to retrieve connections & tokens:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# Local\ncurl -XGET 'http://localhost:3003/connection/<connection-id>?provider_config_key=<config-key>'\n\n# Nango Cloud\ncurl -XGET 'SERVER_URL/connection/<connection-id>?provider_config_key=<config-key>' -H 'Authorization: Basic <encodeInBase64(secret + \":\")>' # Notice the ':' character appended to the Secret before encoding!\n")),(0,a.kt)("h3",{id:"cli"},"CLI"),(0,a.kt)("p",null,"For development convenience, use the CLI to retrieve connections and tokens:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npx nango token:get <connection-id> <unique-config-key> # Token\nnpx nango connection:get <connection-id> <unique-config-key> # Token + Connection info\nnpx nango connection:list # All Connections\n")),(0,a.kt)("h2",{id:"need-help"},"Need help?"),(0,a.kt)("p",null,"If you run into any trouble whilst setting up Nango or have any questions please do not hesitate to contact us - we are happy to help!"),(0,a.kt)("p",null,"Please join our ",(0,a.kt)("a",{parentName:"p",href:"https://nango.dev/slack"},"Slack community"),", where we are very active, and we will do our best to help you fast."))}u.isMDXComponent=!0}}]);